name = "jd-concierge-worker"
main = "src/index.ts"
compatibility_date = "2024-02-14"
routes = [
  { pattern = "kinokoholic.com/api/*", zone_name = "kinokoholic.com" }
]

[vars]
ALLOWED_ORIGINS = "http://localhost:4000,https://kinokoholic.com"
ANALYTICS_SAMPLE_RATE = "0"
AI_MODEL_ID = "@cf/meta/llama-3.1-8b-instruct"
AI_ENABLED = "true"
# Cloudflare Access public identifiers (embedded in JWTs, not secrets)
CF_ACCESS_AUD = "dd3901a59004f912b65429dc74e78170a5ae69ce5a05ed59c5c3a7bf90d9e97b"
CF_ACCESS_TEAM_DOMAIN = "kinokoholic1"
# ANALYZER_API_KEY should be set as a secret using: wrangler secret put ANALYZER_API_KEY

[[d1_databases]]
binding = "DB"
database_name = "jd_concierge"
database_id = "01de23ef-843e-4ad2-a508-62b4dbe3c501"

[[durable_objects.bindings]]
name = "RATE_LIMITER"
class_name = "RateLimiterDO"

[ai]
binding = "AI"

[[migrations]]
tag = "v3"
